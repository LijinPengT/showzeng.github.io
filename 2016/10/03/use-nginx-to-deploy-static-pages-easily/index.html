
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="showzeng&#39;s blog">
    <title>使用 Nginx 部署静态页面 - showzeng&#39;s blog</title>
    <meta name="author" content="showzeng">
    
    
        <link rel="icon" href="http://blog.showzeng.cn/assets/images/favicon-small.png">
    
    
    <meta name="description" content="你知道怎么在自己的服务器上部署一些简单的静态页面吗？使用 Nginx 可以让你爽到飞起！">
<meta property="og:type" content="blog">
<meta property="og:title" content="使用 Nginx 部署静态页面">
<meta property="og:url" content="http://blog.showzeng.cn/2016/10/03/use-nginx-to-deploy-static-pages-easily/index.html">
<meta property="og:site_name" content="showzeng's blog">
<meta property="og:description" content="你知道怎么在自己的服务器上部署一些简单的静态页面吗？使用 Nginx 可以让你爽到飞起！">
<meta property="og:updated_time" content="2016-10-03T08:15:06.819Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用 Nginx 部署静态页面">
<meta name="twitter:description" content="你知道怎么在自己的服务器上部署一些简单的静态页面吗？使用 Nginx 可以让你爽到飞起！">
    
    
        
    
    
        <meta property="og:image" content="http://7xtt0k.com1.z0.glb.clouddn.com/avatar.png"/>
    
    
        <meta property="og:image" content="http://7xtt0k.com1.z0.glb.clouddn.com/weeklyBlog/NO.4/Nginx-Logo.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://7xtt0k.com1.z0.glb.clouddn.com/weeklyBlog/NO.4/Nginx-Logo.png" />
    
    
        <meta property="og:image" content="http://7xtt0k.com1.z0.glb.clouddn.com/weeklyBlog/NO.4/NGINX.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://7xtt0k.com1.z0.glb.clouddn.com/weeklyBlog/NO.4/NGINX.png" />
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-yrst5vo1nxaxbp2g3v9na2wg1lixlpr3ghbjdvskeixmu79deycecx3rh4bt.min.css">
    <!--STYLES END-->
    
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-83268625-1']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">showzeng&#39;s blog</a>
    </div>
    
        
            <a  class="header-right-picture "
                href="#about">
        
        
            <img class="header-picture" src="http://7xtt0k.com1.z0.glb.clouddn.com/avatar.png" alt="Author&#39;s picture"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="http://7xtt0k.com1.z0.glb.clouddn.com/avatar.png" alt="Author&#39;s picture"/>
                </a>
                <h4 class="sidebar-profile-name">showzeng</h4>
                
                    <h5 class="sidebar-profile-bio"><p>Go busy living, or go busy dying!</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-categories"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-tags"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/all-archives"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link open-algolia-search"
                             href="#search"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                        >
                    
                        <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/showzeng" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="http://weibo.com/p/1005055232750920/home?from=page_100505&mod=TAB&is_all=1#place" target="_blank">
                    
                        <i class="sidebar-button-icon fa fa-lg fa-weibo"></i>
                        <span class="sidebar-button-desc">weibo</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
        <div class="post-header-cover
                    text-left
                    post-header-cover--full"
             style="background-image:url('http://7xtt0k.com1.z0.glb.clouddn.com/weeklyBlog/NO.4/NGINX.png');"
             data-behavior="5">
            
                <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title" itemprop="headline">
            使用 Nginx 部署静态页面
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" datetime="2016-10-03T15:53:55+08:00">
	
		    Oct 03, 2016
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Nginx/">Nginx</a>


    
</div>

</div>
            
        </div>

            <div id="main" data-behavior="5"
                 class="hasCover
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <p><strong>你知道怎么在自己的服务器上部署一些简单的静态页面吗？使用 Nginx 可以让你爽到飞起！</strong></p>
<a id="more"></a>
<blockquote>
<ul>
<li>文章来源：itsCoder 的 <a href="https://github.com/itsCoder/weeklyblog" target="_blank" rel="external">WeeklyBolg</a> 项目</li>
<li>itsCoder主页：<a href="http://itscoder.com/" target="_blank" rel="external">http://itscoder.com/</a></li>
<li>作者：<a href="https://github.com/showzeng" target="_blank" rel="external">showzeng</a></li>
<li>审阅者：<a href="https://github.com/yongyu0102" target="_blank" rel="external">用语</a>、<a href="https://github.com/wuchangfeng" target="_blank" rel="external">allenwu</a></li>
</ul>
</blockquote>
<h1 id="table-of-contents">Table of Contents</h1><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginx-介绍"><span class="toc-text">Nginx 介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#为何选用-Nginx"><span class="toc-text">为何选用 Nginx</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginx-安装"><span class="toc-text">Nginx 安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginx-配置"><span class="toc-text">Nginx 配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginx-启动运行"><span class="toc-text">Nginx 启动运行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginx-停止运行"><span class="toc-text">Nginx 停止运行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#参考资料"><span class="toc-text">参考资料</span></a></li></ol>
<h4 id="Nginx-介绍"><a href="#Nginx-介绍" class="headerlink" title="Nginx 介绍"></a><strong>Nginx 介绍</strong></h4><p>Nginx 是俄罗斯人编写的十分轻量级的 HTTP 服务器, Nginx，它的发音为 “ engine X ”，是一个高性能的 HTTP 和反向代理服务器，同时也是一个 IMAP/ POP3/ SMTP 代理服务器。Nginx 是由俄罗斯人 Igor Sysoev 为俄罗斯访问量第二的 Rambler.ru 站点开发的，它已经在该站点运行超过两年半了。Igor Sysoev 在建立的项目时,使用基于 BSD 许可。</p>
<p>英文主页：<a href="http://nginx.net" target="_blank" rel="external">http://nginx.net</a>。</p>
<p>Nginx 作为 HTTP 服务器，有以下几项基本特性：</p>
<ul>
<li>处理静态文件，索引文件以及自动索引；打开文件描述符缓冲。</li>
<li>无缓存的反向代理加速，简单的负载均衡和容错。</li>
<li>FastCGI，简单的负载均衡和容错。</li>
<li>模块化的结构。包括 gzipping, byte ranges, chunked responses,以及 SSI-filter 等 filter。如果由 Fast CGI 或其它代理服务器处理单页中存在的多个 SSI，则这项处理可以并行运行，而不需要相互等待。</li>
<li>支持 SSL 和 TLSSNI。</li>
</ul>
<p>即 Nginx 的优点：轻量、高性能、并发能力强。用来部署静态页面也是相当便捷。</p>
<p>这种高性能得益于 Nginx 的框架。在 Nginx 启动后，会有一个 master 进程和多个 worker 进程。master 进程主要用来管理 worker 进程，包含：接收来自外界的信号，向各 worker 进程发送信号，监控 worker 进程的运行状态，当 worker 进程退出后(异常情况下)，会自动重新启动新的 worker 进程。而基本的网络事件，则是放在 worker 进程中来处理的。多个 worker 进程之间是对等的，他们同等竞争来自客户端的请求，各进程互相之间是独立的。一个请求，只可能在一个 worker 进程中处理，一个 worker 进程，不可能处理其它进程的请求。worker 进程的个数是可以设置的，一般我们会设置与机器 cpu 核数一致，这与 Nginx 的进程模型以及事件处理模型有关。</p>
<h4 id="为何选用-Nginx"><a href="#为何选用-Nginx" class="headerlink" title="为何选用 Nginx"></a><strong>为何选用 Nginx</strong></h4><p>说到 Nginx，可能第一反应就是 <code>反向代理</code> 和 <code>负载均衡</code> 了。那么什么是 <code>反向代理</code>，什么又是 <code>负载均衡</code> 呢？</p>
<p><strong>反向代理</strong></p>
<p>首先了解一下什么是 <code>前向代理</code> 。代理 (Proxy) 也称网络代理，是一种特殊的网络服务，通俗来讲，就是在客户端和目标服务器之间的充当中间人，接收客户端的请求，再根据客户端请求向目标服务器发起相应的请求，从目标服务器获得指定资源后返回给客户端。且代理服务器可以对目标服务器的资源下载至本地缓存，如果客户端所要获取的资源在代理服务器的缓存之中，则代理服务器并不会再向目标服务器发起请求，而是直接返回缓存的资源。</p>
<p>其实代理服务器非常常见，就比如因为 <code>GWF</code> 而存在的一些科学上网的代理商，就是利用国外服务器作为代理服务器，从而正确解析域名来实现科学上网。代理服务器也可以实现隐藏真实 IP，比如著名的 Tor （洋葱路由器）就是通过多重代理和一些加密技术来实现匿名交流。</p>
<p>而 <code>反向代理</code> 则是在服务器端作为代理使用，而不是客户端。也就是说，<code>前向代理</code> 是代理内部网络用户访问 Internet 上服务器的连接请求，<code>反向代理</code> 是以代理服务器来接受 Internet 上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给 Internet 上请求连接的客户端，此时的代理服务器对外就表现为一个服务器。</p>
<p><strong>负载均衡</strong></p>
<p>反向代理负载均衡技术是把将来自 Internet 上的连接请求以反向代理的方式动态地转发给内部网络上的多台服务器进行处理，从而达到负载均衡的目的。</p>
<p><strong>真巧， Nginx 都做到了</strong></p>
<p>Nginx 作为一个优秀的代理服务器，反向代理和负载均衡必然是都具备的。想要更详细得了解这方面的知识和使用方法，可参见文末给出的参考资料： Nginx 入门指南。</p>
<h4 id="Nginx-安装"><a href="#Nginx-安装" class="headerlink" title="Nginx 安装"></a><strong>Nginx 安装</strong></h4><p>本人使用的是腾讯云的服务器，版本为：  Ubuntu Server 14.04.1 LTS 32 位。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ apt-get install nginx</div></pre></td></tr></table></figure>
<p>Mac OS 系统参考这篇文章：<a href="http://learnaholic.me/2012/10/10/installing-nginx-in-mac-os-x-mountain-lion/" target="_blank" rel="external">Installing Nginx in Mac OS X</a></p>
<h4 id="Nginx-配置"><a href="#Nginx-配置" class="headerlink" title="Nginx 配置"></a><strong>Nginx 配置</strong></h4><p>简单地配置 Nginx 的配置文件，以便在启动 Nginx 时去启用这些配置。而本文的重点也是于此。</p>
<p>Nginx 的配置系统由一个主配置文件和其他一些辅助的配置文件构成。这些配置文件均是纯文本文件，一般地，我们只需要配置主配置文件就行了。例如在我的服务器上是在：<code>/etc/nginx/nginx.conf</code> 。</p>
<p><strong>指令上下文</strong></p>
<p>nginx.conf 中的配置信息，根据其逻辑上的意义，对它们进行了分类，也就是分成了多个作用域，或者称之为配置指令上下文。不同的作用域含有一个或者多个配置项。</p>
<p>其中每个配置项由配置指令和指令参数构成，形成一个键值对，<code>#</code> 后面地为注释，理解起来也非常容易。</p>
<p>一般配置文件的结构和通用配置如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div></pre></td><td class="code"><pre><div class="line">user www-data;    # 运行 nginx 的所属组和所有者</div><div class="line">worker_processes 1;    # 开启一个 nginx 工作进程,一般 CPU 几核就写几</div><div class="line">pid /run/nginx.pid;    # pid 路径</div><div class="line"></div><div class="line">events &#123;</div><div class="line">        worker_connections 768;    # 一个进程能同时处理 768 个请求</div><div class="line">        # multi_accept on;</div><div class="line">&#125;</div><div class="line"></div><div class="line"># 与提供 http 服务相关的配置参数，一般默认配置就可以，主要配置在于 http 上下文里的 server 上下文</div><div class="line">http &#123;</div><div class="line">        ##</div><div class="line">        # Basic Settings</div><div class="line">        ##</div><div class="line"></div><div class="line">        ... 此处省略通用默认配置</div><div class="line"></div><div class="line">        ##</div><div class="line">        # Logging Settings</div><div class="line">        ##</div><div class="line">        ... 此处省略通用默认配置</div><div class="line"></div><div class="line">        ##</div><div class="line">        # Gzip Settings</div><div class="line">        ##</div><div class="line"></div><div class="line">        ... 此处省略通用默认配置</div><div class="line"></div><div class="line">        ##</div><div class="line">        # nginx-naxsi config</div><div class="line">        ##</div><div class="line"></div><div class="line">        ... 此处省略通用默认配置</div><div class="line"></div><div class="line">        ##</div><div class="line">        # nginx-passenger config</div><div class="line">        ##</div><div class="line"></div><div class="line">        ... 此处省略通用默认配置</div><div class="line"></div><div class="line">        ##</div><div class="line">        # Virtual Host Configs</div><div class="line">        ##</div><div class="line"></div><div class="line">        ... 此处省略通用默认配置</div><div class="line"></div><div class="line">        # 此时，在此添加 server 上下文，开始配置一个域名，一个 server 配置段一般对应一个域名</div><div class="line">        server &#123;</div><div class="line">                listen 80;               # 监听本机所有 ip 上的 80 端口</div><div class="line">                server_name _;           # 域名：www.example.com 这里 "_" 代表获取匹配所有</div><div class="line">                root /home/filename/;    # 站点根目录</div><div class="line"></div><div class="line">                location / &#123;             # 可有多个 location 用于配置路由地址</div><div class="line">                        try_files index.html =404;</div><div class="line">                &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"># 邮箱的配置，因为用不到，所以把这个 mail 上下文给注释掉</div><div class="line">#mail &#123;</div><div class="line">#       # See sample authentication script at:</div><div class="line">#       # http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript</div><div class="line">#       </div><div class="line">#       # auth_http localhost/auth.php;</div><div class="line">#       # pop3_capabilities "TOP" "USER";</div><div class="line">#       # imap_capabilities "IMAP4rev1" "UIDPLUS";</div><div class="line">#     </div><div class="line">#       server &#123;</div><div class="line">#               listen      localhost:110;</div><div class="line">#               protocol    pop3;</div><div class="line">#               proxy       on;</div><div class="line">#       &#125;</div><div class="line">#</div><div class="line">#       server &#123;</div><div class="line">#               listen      localhost:143;</div><div class="line">#               protocol    imap;</div><div class="line">#               proxy       on;</div><div class="line">#       &#125;</div><div class="line">#&#125;</div></pre></td></tr></table></figure>
<p>这里需要注意的是 http 上下文里的 server 上下文。</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">        <span class="attribute">listen</span> <span class="number">80</span>;               <span class="comment"># 监听本机所有 ip 上的 80 端口</span></div><div class="line">        <span class="attribute">server_name</span> _;           <span class="comment"># 域名：www.example.com 这里 "_" 代表获取匹配所有</span></div><div class="line">        <span class="attribute">root</span> /home/filename/;    <span class="comment"># 站点根目录</span></div><div class="line"></div><div class="line">        <span class="attribute">location</span> / &#123;             <span class="comment"># 可有多个 location 用于配置路由地址</span></div><div class="line">            <span class="attribute">try_files</span> index.html =<span class="number">404</span>;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里的 root 字段最好写在 location 字段的外边，防止出现无法加载 css、js 的情况。因为 css、js 的加载并不是自动的，nginx 无法执行，需要额外的配置来返回资源，所以，对于静态页面的部署，这样做是最为方便的。</p>
<p>这里对 root 作进一步解释，例如在服务器上有 /home/zhihu/ 目录，其下有 index.html 文件和 css/ 以及 img/ ， <code>root /home/zhihu/;</code> 就将指定服务器加载资源时是在 /home/zhihu/ 下查找。</p>
<p>其次， location 后的匹配分多种，其各类匹配方式优先级也各不相同。这里列举一精确匹配例子：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">        <span class="attribute">listen</span> <span class="number">80</span>;               </div><div class="line">        <span class="attribute">server_name</span> _;           </div><div class="line">        <span class="attribute">root</span> /home/zhihu/;    </div><div class="line"></div><div class="line">        <span class="attribute">location</span> = /zhihu &#123;</div><div class="line">            <span class="attribute">rewrite</span><span class="regexp"> ^/.*</span> / <span class="literal">break</span>;</div><div class="line">            <span class="attribute">try_files</span> index.html =<span class="number">404</span>;</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>此时，访问 www.example.com/zhihu 就会加载 zhihu.html 出来了。由于 location 的精确匹配，只有访问  www.example.com/zhihu 这个路由时才会正确响应，而且此时要通过 rewrite 正则匹配，把 /zhihu 解析替换成原来的 / 。关于更多 location 字段用法，可以在文章最后给出的参考资料中查看。</p>
<p><strong>关于使用 nginx 部署静态页面，最简单便捷的配置方法</strong></p>
<p>上面说了挺多关于配置的说明，下面推荐一种个人认为最为便捷的配置方法。（特此感谢 <a href="https://github.com/guyskk" target="_blank" rel="external">guyskk</a> 学长的答疑解惑）</p>
<p>首先创建一个目录，例如： <code>/home/ubuntu/website</code> 然后在这个 website 文件夹下可以放置你需要部署的静态页面文件，例如 website 下我有 google、zhihu、fenghuang 这三个文件夹，其中 server 字段配置如下：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="section">server</span> &#123;</div><div class="line">        <span class="attribute">listen</span> <span class="number">80</span>;</div><div class="line">        <span class="attribute">server_name</span> _;</div><div class="line">        <span class="attribute">root</span> /home/ubuntu/website;</div><div class="line">        <span class="attribute">index</span> index.html;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里每个文件夹下面的静态页面文件名都是 index.html ，我以前有个很不好的习惯，比如 zhihu 页面就喜欢命名为 zhihu.html ，但就从前端来看，这也是不符合规范的。</p>
<p>这样配置的话，例如当你访问 <a href="http://www.showzeng.cn/google/" target="_blank" rel="external">www.showzeng.cn/google/</a> 时，nginx 就会去 website 目录下的 google 文件夹下寻找到 index.html 并把 google 页面返回，同理，访问 <a href="http://www.showzeng.cn/zhihu/" target="_blank" rel="external">www.showzeng.cn/zhihu/</a> 时，会寻找到 zhihu 文件夹下的 index.html 并把 zhihu 页面返回。</p>
<p>而在 zhihu、google 、fenghuang 文件夹的同级目录上，再添加你的域名首页 index.html 时，访问 www.example.com 时就会返回了。</p>
<p>这里唯一美中不足的是，访问域名中 www.showzeng.cn/zhihu 末尾会自动加上 <code>/</code> ，在浏览器中按 F12 调试会发现 www.showzeng.cn/zhihu 为 301 状态码，因为 index.html 是在 zhihu/ 文件夹下，所以在搜索过程中会重定向到 www.showzeng.cn/zhihu/ ，起初我是接受不了的，那一 <code>/</code> 看起来太难受了，但是只要一想到要一个一个 location 字段去匹配，我一下子就接受了。不知道你怎么看，反正我是接受了。</p>
<h4 id="Nginx-启动运行"><a href="#Nginx-启动运行" class="headerlink" title="Nginx 启动运行"></a><strong>Nginx 启动运行</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo nginx <span class="_">-s</span> reload</div></pre></td></tr></table></figure>
<p>使用 reload 方法不用重启服务，直接重新加载配置文件，客户端感觉不到服务异常，实现平滑切换。当然你也可以重新启动 nginx 服务。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo service nginx restart</div></pre></td></tr></table></figure>
<h4 id="Nginx-停止运行"><a href="#Nginx-停止运行" class="headerlink" title="Nginx 停止运行"></a><strong>Nginx 停止运行</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo nginx <span class="_">-s</span> stop</div></pre></td></tr></table></figure>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a><strong>参考资料</strong></h4><p><a href="http://wiki.jikexueyuan.com/project/nginx/" target="_blank" rel="external">Nginx 入门指南</a></p>
<p><a href="http://carrot.is/coding/nginx_introduction" target="_blank" rel="external">Nginx for Developers: An Introduction</a> <a href="https://fraserxu.me/2013/06/22/Nginx-for-developers/" target="_blank" rel="external">（译文）</a></p>
<p><a href="http://seanlook.com/2015/05/17/nginx-location-rewrite/" target="_blank" rel="external">nginx 配置 location 总结及 rewrite 规则写法</a></p>
<div class="alert info"><p>一份 Nginx 指南从入门到精通的 pdf 文件，如有需要，请在留言处留下邮箱！</p>
</div>

            
        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/Nginx/">Nginx</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/09/11/Something-about-Gson-parsing/" data-tooltip="Gson 解析那些事">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.showzeng.cn/2016/10/03/use-nginx-to-deploy-static-pages-easily/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?url=http://blog.showzeng.cn/2016/10/03/use-nginx-to-deploy-static-pages-easily/">
                <i class="fa fa-weibo"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#ds-thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents">
            
                <i class="fa fa-arrow-up"></i>
            </a>
        </li>
    </ul>
</div>


        
            
                <div id="ds-thread" class="ds-thread" data-thread-key="2016/10/03/use-nginx-to-deploy-static-pages-easily/"
     data-title="使用 Nginx 部署静态页面" data-url="http://blog.showzeng.cn/2016/10/03/use-nginx-to-deploy-static-pages-easily/">
</div>

            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2016 showzeng. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/2016/09/11/Something-about-Gson-parsing/" data-tooltip="Gson 解析那些事">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.showzeng.cn/2016/10/03/use-nginx-to-deploy-static-pages-easily/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?url=http://blog.showzeng.cn/2016/10/03/use-nginx-to-deploy-static-pages-easily/">
                <i class="fa fa-weibo"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#ds-thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents">
            
                <i class="fa fa-arrow-up"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="5">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.showzeng.cn/2016/10/03/use-nginx-to-deploy-static-pages-easily/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="http://service.weibo.com/share/share.php?&amp;text=http://blog.showzeng.cn/2016/10/03/use-nginx-to-deploy-static-pages-easily/">
                <i class="fa fa-weibo"></i><span>Share on weibo</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="http://7xtt0k.com1.z0.glb.clouddn.com/avatar.png" alt="Author&#39;s picture"/>
        
            <h4 id="about-card-name">showzeng</h4>
        
            <div id="about-card-bio"><p>Go busy living, or go busy dying!</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>student | promonkey</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                China
            </div>
        
    </div>
</div>

        <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-close"></i></span>
            <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search"
                    class="form-control input--large search-input" placeholder="Search "
                    autofocus="autofocus"/>
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">no post found</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/05/05/why-blog/">
                            <img class="media-image" src="http://7xtt0k.com1.z0.glb.clouddn.com/blog/fog-street.jpg" width="90" height="90"/>
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/05/05/why-blog/">
                            <h3 class="media-heading">Why Blog?</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    May 5, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p><strong>Go busy living, or go busy dying</strong></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/05/10/data-structure-preface/">
                            <img class="media-image" src="http://7xtt0k.com1.z0.glb.clouddn.com/blog/cat.jpg" width="90" height="90"/>
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/05/10/data-structure-preface/">
                            <h3 class="media-heading">数据结构之前言</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    May 10, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p><strong>在开始数据结构之前，先来看看一些小的知识预热一下。主要是计算机内存的分配，指针的风险，以及数组的存储分配。</strong></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/05/14/android-security/">
                            <img class="media-image" src="http://7xtt0k.com1.z0.glb.clouddn.com/blog/the-end-of-the-world.jpg" width="90" height="90"/>
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/05/14/android-security/">
                            <h3 class="media-heading">Android六种核心安全机制</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    May 14, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p><strong>深入理解安全机制，Android的六种核心安全机制：加密、密钥、签名与证书。本文为安全机制背景的介绍，以及由需求到技术的革新。</strong></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/05/18/data-structure-introduction/">
                            <img class="media-image" src="http://7xtt0k.com1.z0.glb.clouddn.com/blog/lunyu.jpg" width="90" height="90"/>
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/05/18/data-structure-introduction/">
                            <h3 class="media-heading">数据结构之绪论篇</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    May 18, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p><strong>数据结构是一门研究非数值计算的程序设计问题中计算机的操作对象以及它们之间的关系和操作的学科。主要研究数据的逻辑结构、数据在计算机中的组织方式（存储结构）以及对数据进行的各种非数值运算的方法和算法。因此，数据结构主要有3个方面：数据的逻辑结构、数据的存储结构、数据的算法。</strong></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/09/11/Something-about-Gson-parsing/">
                            <img class="media-image" src="http://7xtt0k.com1.z0.glb.clouddn.com/blog/tree.jpg" width="90" height="90"/>
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/09/11/Something-about-Gson-parsing/">
                            <h3 class="media-heading">Gson 解析那些事</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Sep 11, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p><strong>网络请求常常伴随着数据的处理，而今 JSON 格式比较流行，就来看看 Android 中是如何去解析它的。</strong></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-left">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/10/03/use-nginx-to-deploy-static-pages-easily/">
                            <img class="media-image" src="http://7xtt0k.com1.z0.glb.clouddn.com/weeklyBlog/NO.4/Nginx-Logo.png" width="90" height="90"/>
                        </a>
                    </div>
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://blog.showzeng.cn/2016/10/03/use-nginx-to-deploy-static-pages-easily/">
                            <h3 class="media-heading">使用 Nginx 部署静态页面</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Oct 3, 2016
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p><strong>你知道怎么在自己的服务器上部署一些简单的静态页面吗？使用 Nginx 可以让你爽到飞起！</strong></p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium"
                data-message-zero="no post found"
                data-message-one="1 post found"
                data-message-other="{n} posts found">
                6 posts found
            </p>
        </div>
    </div>
</div>
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-rt08quwts7iav5x0cfd2ym0gb5qkd1lvrsmwrakxtkhefmaaes4ywkmnjnwf.min.js"></script>
<!--SCRIPTS END-->

    
        <script type="text/javascript">
            var duoshuoQuery = {short_name:'showzeng'};
            (function() {
                var ds = document.createElement('script');
                ds.type = 'text/javascript';ds.async = true;
                ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
                ds.charset = 'UTF-8';
                (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
        </script>
    



    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('PW2EORPGTB', 'cb1c6053ab62ea78fa68fc97bcc2ce39');
        var algoliaIndex = algoliaClient.initIndex('showzeng&#39;s blog');
    </script>

    </body>
</html>
